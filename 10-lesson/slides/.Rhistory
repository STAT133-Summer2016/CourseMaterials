library(tidyr)
?gather
?spread
?separate
help(package = "tidyr")
df <- data.frame(
x = 1:3,
y = c("a", "d,e,f", "g,h"),
z = c("1", "2,3,4", "5,6"),
stringsAsFactors = FALSE
)
separate_rows(df, y, z, convert = TRUE)
df
?gather
?spread
stocks <- data.frame(
time = as.Date('2009-01-01') + 0:9,
X = rnorm(10, 0, 1),
Y = rnorm(10, 0, 2),
Z = rnorm(10, 0, 4)
)
stocksm <- stocks %>% gather(stock, price, -time)
stocksm
df <- data.frame(names = c("John", "Mary", "Sue"),
A = c(121, 110, 130),
B = c(166, 145, 141))
df
gather(data = df, key = Treatment, value = Blood_Pressure, A, B)
?separate
df <- data.frame(x = c(NA, "a.b", "a.d", "b.c"))
df %>% separate(x, c("A", "B"))
separate(data = df, col = x, into = c("first", "second"))
df <- data.frame(x = c(NA, "a.b", "a.d", "b.c"), y = 1:3)
df
df <- data.frame(x = c(NA, "a.b", "a.d", "b.c"), y = 1:4)
df
separate(data = df, col = x, into = c("first", "second"))
?separate
df <- read_csv("../data/pew.txt")
library(readr)
df <- read_csv("../data/pew.txt")
df
df <- read_tsv("../data/pew.txt")
df
?gather
gather(df, key = income, value = n, -religion)
?read_tsv
df <- read_delim("../data/pew.txt")
df <- read_csv("../data/tb.csv")
df
?who
who
df <- read_csv("../data/tb.csv")
df
df <- select(df, -new_sp)
library(dplyr)
df <- select(df, -new_sp)
df
?rename
select(iris, petal = starts_with("Petal"))
library(stringr)
df <- read_csv("../data/tb.csv") %>%
select(-new_sp)
names(df) <- str_replace(names(df), "new_sp", "")
df
df <- read_csv("../data/tb.csv") %>%
select(-new_sp)
names(df) <- str_replace(names(df), "new_sp_", "")
df
tidydf <- gather(df, gender, n, -iso2, - year)
tidydf
tidydf <- gather(df, gender, n, -iso2, -year) %>%
mutate(gender, gender = str_replace_all("([mf])(.*)", "\\1,\\2")) %>%
separate(gender, c("gender", "age"), sep = ",")
tidydf <- gather(df, gender, n, -iso2, -year) %>%
mutate(gender, gender = str_replace_all(gender, "([mf])(.*)", "\\1,\\2")) %>%
separate(gender, c("gender", "age"), sep = ",")
tidydf
unique(tidydf$age)
age_ranges <- c("04" = "0-4", "514" = "5-14", "014" = "0-14",
"1524" = "15-24", "2534" = "25-34", "3544" = "35-44",
"4554" = "45-54", "5564" = "55-64", "65" = "65+",
"u" = "unknown")
tidydf <- gather(df, gender, n, -iso2, -year) %>%
mutate(gender, gender = str_replace_all(gender, "([mf])(.*)", "\\1,\\2")) %>%
separate(gender, c("gender", "age"), sep = ",") %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values))
gender_values <- c("m" = "male", "f" = "female")
tidydf <- gather(df, gender, n, -iso2, -year) %>%
mutate(gender, gender = str_replace_all(gender, "([mf])(.*)", "\\1,\\2")) %>%
separate(gender, c("gender", "age"), sep = ",") %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values))
tidydf
df <- read_tsv("../data/weather.txt")
df
tidydf <- df %>%
gather(df, day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element))
?gather
tidydf <- df %>%
gather(df, day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
tidydf <- df %>%
gather(df, day, temperature, -id, -year, -month, -element)
df <- read_tsv("../data/weather.txt")
tidydf <- df %>%
gather(df, day, "temperature", -id, -year, -month, -element)
tidydf <- df %>%
gather(df, key = day, value = temperature, -id, -year, -month, -element)
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element)
tidydf
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element))
tidydf
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature)
tidydf
unique(tidydf$temperature)
df
tidydf <- gather(df, gender, n, -iso2, -year) %>%
mutate(gender, gender = str_replace_all(gender, "([mf])(.*)", "\\1,\\2")) %>%
separate(gender, c("gender", "age"), sep = ",") %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values)) %>%
na.omit
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
na.omit
tidydf
299-273
df <- read_csv("../data/tb.csv") %>%
select(-new_sp)
names(df) <- str_replace(names(df), "new_sp_", "")
age_ranges <- c("04" = "0-4", "514" = "5-14", "014" = "0-14",
"1524" = "15-24", "2534" = "25-34", "3544" = "35-44",
"4554" = "45-54", "5564" = "55-64", "65" = "65+",
"u" = "unknown")
gender_values <- c("m" = "male", "f" = "female")
tidydf <- gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1) %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values))
tidydf
tidydf <- gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1) %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values)) %>%
na.omit
tidydf
df <- read_tsv("../data/weather.txt")
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
na.omit
tidydf
?str_sub
str_sub(293, -1, -1)
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(temperature, as.numeric(str_replace_all((.*)(.)$, \\1\\.\\2))) %>%
na.omit
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(temperature, as.numeric(str_replace_all((.*)(.)$, "\\1\\.\\2"))) %>%
na.omit
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(temperature, as.numeric(str_replace_all((.*)(.)$, "\\1\\.\\2")))
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element))
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature)
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(temperature, as.numeric(str_replace_all("(.*)(.)$", "\\1\\.\\2"))) %>%
na.omit
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(temperature = as.numeric(str_replace_all(temperature, "(.*)(.)$", "\\1\\.\\2"))) %>%
na.omit
tidydf
tidydf <- df %>%
gather(day, temperature, -id, -year, -month, -element) %>%
mutate(day = str_replace(day, "d", ""),
element = str_to_lower(element)) %>%
select(id, year, month, day, element, temperature) %>%
mutate(day = as.integer(day),
temperature = as.numeric(str_replace_all(temperature, "(.*)(.)$", "\\1\\.\\2"))) %>%
na.omit
tidydf
read_csv("../data/billboard.csv")
df <- read_csv("../data/billboard.csv")
read_csv
df
View(df)
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date entered, - date.peaked)
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked)
tidydf
?unrowname
unique(select(-Week, - Rank, -date.entered, -date.peaked))
unique(select(tidydf, -Week, -Rank, -date.entered, -date.peaked))
Rankings <- tidydf %>%
select(-Week, -Rank, -date.entered, -date.peaked) %>%
unique %>%
mutate(Song_ID = rownumber())
Rankings <- tidydf %>%
select(-Week, -Rank, -date.entered, -date.peaked) %>%
unique %>%
mutate(Song_ID = row_number())
Rankings
df <- read_tsv("../data/pew.txt")
df
View(df)
longdf <- gather(df, key = income, value = n, -religion)
longdf
df <- read_csv("../data/tb.csv") %>%
select(-new_sp)
names(df) <- str_replace(names(df), "new_sp_", "")
View(df)
tidydf <- gather(df, gender, n, -iso2, -year)
tidydf
tidydf <- gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1)
tidydf
gather(df, gender, n, -iso2, -year)
df
gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1)
gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 2)
gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1)
gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1) %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values))
gather(df, gender, n, -iso2, -year) %>%
separate(gender, c("gender", "age"), 1) %>%
mutate(age = str_replace_all(age, age_ranges),
gender = str_replace_all(gender, gender_values)) %>%
na.omit
df <- read_tsv("../data/weather.txt")
View(df)
df <- read_csv("../data/billboard.csv")
df
View(df)
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked)
df <- read_csv("../data/billboard.csv")
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked)
tidydf
View(tidydf)
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked) %>%
mutate(Week = str_match(Week, "[0-9]+"))
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked)
tidydf
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked) %>%
mutate(Week = str_match(Week, "[0-9]+"))
str(df)
nrow(df)
nrow(tidydf)
df
tidydf <- df %>%
gather(Week, Rank, -year, -artist.inverted, -track, -time, -genre,
-date.entered, - date.peaked)
str_replace_all("Diffie, Joe", "(.*), (.*)", "\\2, \\1")
str_replace_all("Diffie, Joe", "(.*), (.*)", "\\2 \\1")
